# Missing CHR$ Codes Report

## Summary

Analysis of CHR$ codes (0-255) to identify which codes are not associated with 8x8 pixel data.

**Analysis Date:** Generated by script `scripts/check-missing-chr-codes.ts`

---

## Findings

### CHR$ Code Distribution (0-255)

- **Total CHR$ codes:** 256 (0-255)
- **System codes (0-31):** 32 codes - Intentionally excluded (cannot be specified directly per manual page 109)
- **Standard background codes (32-183):** 152 codes
- **Special graphics codes (184-255):** 72 codes - Not yet implemented

---

## Critical Missing: Standard Background Codes (32-183)

### ‚ö†Ô∏è Missing Code: **96**

**Manual Specification (page 108):**
- Code 96 (hexadecimal 60): **„Ç¢** (kana character)

**Current Implementation:**
- Code 96 is **NOT** present in background items
- Kana characters start at code 97 (which is '„Ç¢')

**Issue:** There is an **off-by-one discrepancy** in the kana character implementation:
- Manual shows kana starting at code 96 („Ç¢)
- Implementation shows kana starting at code 97 („Ç¢)
- All kana codes are shifted by +1

**Impact:** 
- When using `CHR$(96)`, there is no associated 8x8 pixel data
- The character '„Ç¢' is accessible via `CHR$(97)` instead of `CHR$(96)` per the manual

**Status:** 
- ‚úÖ Code 96 should have pixel data per Character Code List B (pages 108-109)
- ‚ùå Currently missing from implementation

---

## Not Yet Implemented: Special Graphics Codes (184-255)

**Total Missing:** 72 codes

These codes are part of Character Code List B (pages 108-109) but are not yet implemented in the codebase:

### Categories:

1. **E0-E7 (Codes 184-191):** 8 codes
2. **F0-F7 - MARIO (Codes 192-199):** 8 codes
3. **G0-G7 - LANDSCAPE (Codes 200-207):** 8 codes
4. **H0-H7 - DONKEY KONG Jr. (Codes 208-215):** 8 codes
5. **I0-I7 - ISLAND MAN (Codes 216-223):** 8 codes
6. **J0-J7 - MAZE (Codes 224-231):** 8 codes
7. **K0-K7 - RULER FOR GRAPH (Codes 232-239):** 8 codes
8. **L0-L7 - BOARD FRAME (Codes 240-247):** 8 codes
9. **M0-M7 - INKPOT PAINT (Codes 248-255):** 8 codes

**Status:**
- ‚ùå Not implemented
- üìù These are game-specific graphics that may not be essential for basic PRINT functionality

---

## Intentionally Excluded: System Codes (0-31)

**Total:** 32 codes

**Per Manual (page 109):**
> "the hexadecimal codes from 00 to 1F may not be specified directly because they are used by the system"

**Status:**
- ‚úÖ Intentionally excluded - correct behavior
- These codes cannot be used directly for background rendering

---

## Recommendations

### Priority 1: Fix Code 96

1. **Option A:** Add code 96 with pixel data for '„Ç¢' and shift all existing kana codes down by 1
2. **Option B:** Verify if the current offset is intentional (e.g., due to system behavior)
3. **Impact:** Ensures `CHR$(96)` works as specified in the manual

### Priority 2: Evaluate Special Graphics (184-255)

1. Determine if these codes are needed for your use case
2. If needed, extract pixel data from character table images
3. These may be optional depending on whether you need game-specific graphics

---

## References

- **Family Basic Manual:**
  - Page 83: CHR$ function specification (accepts 0-255)
  - Pages 106-107: Character Code List A (sprites, 0-211)
  - Pages 108-109: Character Code List B (background characters, 0-255)
  
- **Existing Analysis:**
  - `docs/analysis/background-items-completeness-analysis.md`
  
- **Code References:**
  - `src/shared/data/bg/` - Background items data
  - `src/shared/utils/backgroundLookup.ts` - Lookup functions
  - `scripts/check-missing-chr-codes.ts` - Analysis script

---

## Quick Reference: Missing Codes Summary

| Code Range | Count | Status | Notes |
|------------|-------|--------|-------|
| 0-31 | 32 | ‚úÖ Excluded | System codes (cannot specify directly) |
| **96** | **1** | **‚ö†Ô∏è Missing** | **Should be '„Ç¢' per manual** |
| 184-255 | 72 | ‚ùå Not implemented | Special graphics (game-specific) |
| **Total Missing (32-183)** | **1** | - | **Code 96** |

---

*Generated by analyzing all CHR$ codes (0-255) against the current background items implementation.*