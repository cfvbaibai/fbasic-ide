<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Sprite Sheet Animation Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }

        h1 {
            color: #4CAF50;
        }

        h2 {
            color: #81C784;
            margin-top: 0;
        }

        .sprite-container {
            display: inline-block;
            margin: 20px;
            padding: 10px;
            background: #333;
            border-radius: 4px;
        }

        /* 
         * SPRITE SHEET CONCEPT:
         * A sprite sheet is a single image containing multiple frames of animation
         * arranged in a grid. Instead of loading multiple images, we load one image
         * and use CSS background-position to show different frames.
         * 
         * Example sprite sheet layout:
         * [Frame1] [Frame2] [Frame3] [Frame4]
         * 
         * We animate background-position to cycle through frames.
         */

        /* Demo 1: Simple 2-frame walk cycle using CSS gradient (simulated sprite sheet) */
        .sprite-walk {
            width: 64px;
            height: 64px;
            background: 
                /* Frame 1: Left foot forward */
                linear-gradient(135deg, #ff6b6b 0%, #ff6b6b 30%, #4ecdc4 30%, #4ecdc4 100%),
                /* Frame 2: Right foot forward */
                linear-gradient(135deg, #4ecdc4 0%, #4ecdc4 30%, #ff6b6b 30%, #ff6b6b 100%);
            background-size: 200% 100%; /* 2 frames side by side */
            background-position: 0 0;
            background-repeat: no-repeat;
            animation: walk-cycle 0.5s steps(2) infinite;
            border: 2px solid #fff;
        }

        @keyframes walk-cycle {
            from { background-position: 0 0; }
            to { background-position: -100% 0; } /* Move to show frame 2 */
        }

        /* Demo 2: 4-frame animation cycle */
        .sprite-run {
            width: 64px;
            height: 64px;
            background: 
                linear-gradient(90deg, #ff6b6b 0%, #ff6b6b 25%, transparent 25%),
                linear-gradient(90deg, transparent 25%, #4ecdc4 25%, #4ecdc4 50%, transparent 50%),
                linear-gradient(90deg, transparent 50%, #ffe66d 50%, #ffe66d 75%, transparent 75%),
                linear-gradient(90deg, transparent 75%, #95e1d3 75%, #95e1d3 100%);
            background-size: 400% 100%; /* 4 frames */
            background-position: 0 0;
            animation: run-cycle 0.8s steps(4) infinite;
            border: 2px solid #fff;
        }

        @keyframes run-cycle {
            from { background-position: 0 0; }
            to { background-position: -300% 0; } /* Move to show all 4 frames */
        }

        /* Demo 3: Horizontal inversion (for left-facing sprites) */
        .sprite-walk-left {
            width: 64px;
            height: 64px;
            background: 
                linear-gradient(135deg, #ff6b6b 0%, #ff6b6b 30%, #4ecdc4 30%, #4ecdc4 100%),
                linear-gradient(135deg, #4ecdc4 0%, #4ecdc4 30%, #ff6b6b 30%, #ff6b6b 100%);
            background-size: 200% 100%;
            background-position: 0 0;
            animation: walk-cycle 0.5s steps(2) infinite;
            transform: scaleX(-1); /* Horizontal flip for left-facing */
            border: 2px solid #fff;
        }

        /* Demo 4: Combined position movement + sprite animation */
        .sprite-moving {
            width: 64px;
            height: 64px;
            background: 
                linear-gradient(135deg, #ff6b6b 0%, #ff6b6b 30%, #4ecdc4 30%, #4ecdc4 100%),
                linear-gradient(135deg, #4ecdc4 0%, #4ecdc4 30%, #ff6b6b 30%, #ff6b6b 100%);
            background-size: 200% 100%;
            background-position: 0 0;
            animation: 
                walk-cycle 0.5s steps(2) infinite,
                move-right 3s linear forwards;
            border: 2px solid #fff;
        }

        @keyframes move-right {
            from { transform: translateX(0); }
            to { transform: translateX(300px); }
        }

        /* Demo 5: Real sprite sheet example (using actual image would go here) */
        .sprite-real {
            width: 64px;
            height: 64px;
            /* In real implementation, this would be:
               background-image: url('mario-walk-sheet.png');
               background-size: 200% 100%; // 2 frames horizontally
            */
            background: 
                repeating-linear-gradient(
                    90deg,
                    #ff6b6b 0px, #ff6b6b 32px,
                    #4ecdc4 32px, #4ecdc4 64px
                );
            background-size: 200% 100%;
            animation: walk-cycle 0.5s steps(2) infinite;
            border: 2px solid #fff;
        }

        .code-block {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .code-block code {
            color: #81C784;
        }

        .explanation {
            background: #333;
            padding: 15px;
            border-left: 4px solid #4CAF50;
            margin: 10px 0;
        }

        .controls {
            margin: 20px 0;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        button:hover {
            background: #45a049;
        }

        button:active {
            background: #3d8b40;
        }

        .paused {
            animation-play-state: paused !important;
        }
    </style>
</head>
<body>
    <h1>CSS Sprite Sheet Animation Demo</h1>
    <p>This demo shows how to animate sprites using CSS sprite sheets - a single image containing multiple frames.</p>

    <div class="demo-section">
        <h2>Concept: What is a Sprite Sheet?</h2>
        <div class="explanation">
            <p><strong>Sprite Sheet:</strong> A single image file containing multiple animation frames arranged in a grid.</p>
            <p><strong>Example layout:</strong></p>
            <pre style="background: #1a1a1a; padding: 10px; border-radius: 4px;">
[Frame 1] [Frame 2] [Frame 3] [Frame 4]
   64px     64px      64px      64px
            </pre>
            <p><strong>Benefits:</strong></p>
            <ul>
                <li>Single HTTP request (faster loading)</li>
                <li>GPU-accelerated animation (smooth, no JavaScript)</li>
                <li>No main thread blocking</li>
                <li>Efficient memory usage</li>
            </ul>
        </div>
    </div>

    <div class="demo-section">
        <h2>Demo 1: Simple 2-Frame Walk Cycle</h2>
        <div class="sprite-container">
            <div class="sprite-walk"></div>
        </div>
        <div class="code-block">
            <code>
.sprite-walk {
    width: 64px;
    height: 64px;
    background-size: 200% 100%; /* 2 frames = 200% width */
    background-position: 0 0;
    animation: walk-cycle 0.5s steps(2) infinite;
}

@keyframes walk-cycle {
    from { background-position: 0 0; }      /* Show frame 1 */
    to { background-position: -100% 0; }    /* Show frame 2 */
}
            </code>
        </div>
        <div class="explanation">
            <p><strong>How it works:</strong></p>
            <ul>
                <li><code>background-size: 200% 100%</code> - Makes each frame 100% of container width (2 frames total)</li>
                <li><code>steps(2)</code> - Creates discrete frame switching (no smooth transition between frames)</li>
                <li><code>background-position: -100% 0</code> - Shifts view to show the second frame</li>
                <li>Animation loops infinitely, creating walking effect</li>
            </ul>
        </div>
    </div>

    <div class="demo-section">
        <h2>Demo 2: 4-Frame Run Cycle</h2>
        <div class="sprite-container">
            <div class="sprite-run"></div>
        </div>
        <div class="code-block">
            <code>
.sprite-run {
    background-size: 400% 100%; /* 4 frames = 400% width */
    animation: run-cycle 0.8s steps(4) infinite;
}

@keyframes run-cycle {
    from { background-position: 0 0; }
    to { background-position: -300% 0; } /* Move 3 frame widths to show all 4 */
}
            </code>
        </div>
        <div class="explanation">
            <p>For N frames, move <code>-(N-1) × 100%</code> to cycle through all frames.</p>
        </div>
    </div>

    <div class="demo-section">
        <h2>Demo 3: Horizontal Inversion (Left-Facing)</h2>
        <div class="sprite-container">
            <div class="sprite-walk"></div>
            <span style="margin: 0 20px; font-size: 24px;">→</span>
            <div class="sprite-walk-left"></div>
        </div>
        <div class="code-block">
            <code>
.sprite-walk-left {
    /* Same sprite sheet and animation */
    animation: walk-cycle 0.5s steps(2) infinite;
    transform: scaleX(-1); /* Flip horizontally */
}
            </code>
        </div>
        <div class="explanation">
            <p>Use CSS <code>transform: scaleX(-1)</code> to flip sprites horizontally for left-facing animations.</p>
            <p>This avoids needing separate left-facing sprite sheets!</p>
        </div>
    </div>

    <div class="demo-section">
        <h2>Demo 4: Combined Movement + Animation</h2>
        <div class="sprite-container" style="width: 400px; overflow: hidden;">
            <div class="sprite-moving"></div>
        </div>
        <div class="code-block">
            <code>
.sprite-moving {
    animation: 
        walk-cycle 0.5s steps(2) infinite,  /* Sprite frame animation */
        move-right 3s linear forwards;      /* Position movement */
}

@keyframes move-right {
    from { transform: translateX(0); }
    to { transform: translateX(300px); }
}
            </code>
        </div>
        <div class="explanation">
            <p><strong>Key insight:</strong> Two independent animations running simultaneously:</p>
            <ul>
                <li><strong>Sprite animation:</strong> Cycles through frames (walk-cycle)</li>
                <li><strong>Position animation:</strong> Moves sprite across screen (move-right)</li>
            </ul>
            <p>Both are GPU-accelerated CSS animations - no JavaScript needed!</p>
        </div>
    </div>

    <div class="demo-section">
        <h2>Demo 5: Real Implementation Example</h2>
        <div class="code-block">
            <code>
/* HTML */
&lt;div class="mario-sprite" data-direction="right"&gt;&lt;/div&gt;

/* CSS */
.mario-sprite {
    width: 64px;
    height: 64px;
    background-image: url('mario-walk-sheet.png');
    background-size: 200% 100%; /* 2 frames */
    animation: mario-walk 0.5s steps(2) infinite;
}

.mario-sprite[data-direction="left"] {
    transform: scaleX(-1); /* Flip for left */
}

@keyframes mario-walk {
    from { background-position: 0 0; }
    to { background-position: -100% 0; }
}

/* JavaScript - Just set attributes, CSS handles animation */
spriteElement.setAttribute('data-direction', 'left');
            </code>
        </div>
        <div class="explanation">
            <p><strong>For Family BASIC implementation:</strong></p>
            <ol>
                <li>Create sprite sheets for each character's animation sequences (WALK, LADDER, etc.)</li>
                <li>When <code>DEF MOVE</code> is executed, determine sprite sequence and direction</li>
                <li>Apply CSS class with appropriate sprite sheet and animation</li>
                <li>Use <code>transform: scaleX(-1)</code> for left-facing sprites</li>
                <li>Position movement uses separate CSS transition</li>
                <li><strong>No JavaScript frame loops needed!</strong></li>
            </ol>
        </div>
    </div>

    <div class="demo-section">
        <h2>Performance Comparison</h2>
        <div class="explanation">
            <table style="width: 100%; border-collapse: collapse;">
                <tr style="background: #333;">
                    <th style="padding: 10px; text-align: left; border: 1px solid #555;">Approach</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #555;">Main Thread</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #555;">GPU</th>
                    <th style="padding: 10px; text-align: left; border: 1px solid #555;">Performance</th>
                </tr>
                <tr>
                    <td style="padding: 10px; border: 1px solid #555;">JavaScript frame loop</td>
                    <td style="padding: 10px; border: 1px solid #555;">❌ Blocked</td>
                    <td style="padding: 10px; border: 1px solid #555;">❌ No</td>
                    <td style="padding: 10px; border: 1px solid #555;">Poor</td>
                </tr>
                <tr style="background: #2a2a2a;">
                    <td style="padding: 10px; border: 1px solid #555;"><strong>CSS sprite sheet</strong></td>
                    <td style="padding: 10px; border: 1px solid #555;"><strong>✅ Free</strong></td>
                    <td style="padding: 10px; border: 1px solid #555;"><strong>✅ Yes</strong></td>
                    <td style="padding: 10px; border: 1px solid #555;"><strong>Excellent</strong></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="demo-section">
        <h2>Implementation Strategy for Family BASIC</h2>
        <div class="explanation">
            <p><strong>Step 1: Create Sprite Sheets</strong></p>
            <ul>
                <li>For each character (Mario, Lady, etc.), create sprite sheets for each sequence</li>
                <li>Example: <code>mario-walk-sheet.png</code> contains WALK1 and WALK2 frames side-by-side</li>
                <li>Example: <code>mario-ladder-sheet.png</code> contains LADDER frames</li>
            </ul>

            <p><strong>Step 2: CSS Animation Classes</strong></p>
            <ul>
                <li>Define CSS classes for each sprite sequence (e.g., <code>.mario-walk</code>, <code>.mario-ladder</code>)</li>
                <li>Each class specifies sprite sheet, frame count, and animation timing</li>
            </ul>

            <p><strong>Step 3: AnimationManager Commands</strong></p>
            <ul>
                <li><code>START_MOVEMENT</code>: Apply sprite animation class + position transition</li>
                <li><code>STOP_MOVEMENT</code>: Remove animation classes</li>
                <li><code>CHANGE_DIRECTION</code>: Update transform for inversion</li>
            </ul>

            <p><strong>Step 4: Main Thread Execution</strong></p>
            <ul>
                <li>Apply CSS classes to sprite elements</li>
                <li>Browser handles all animation (GPU-accelerated)</li>
                <li>No JavaScript loops needed!</li>
            </ul>
        </div>
    </div>

    <script>
        // Demo: Pause/Resume animation
        document.addEventListener('DOMContentLoaded', function() {
            const sprites = document.querySelectorAll('.sprite-walk, .sprite-run, .sprite-moving');
            
            // Add click to pause/resume
            sprites.forEach(sprite => {
                sprite.addEventListener('click', function() {
                    this.classList.toggle('paused');
                });
                sprite.style.cursor = 'pointer';
                sprite.title = 'Click to pause/resume';
            });
        });
    </script>
</body>
</html>

