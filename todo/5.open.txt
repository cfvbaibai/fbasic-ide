type: refactor
status: open
subject: Restrict buffer-related magic numbers to centralized place
description:
The codebase has many hardcoded magic numbers related to buffer layout scattered across files:

Examples:
- 8 (MAX_SPRITES, MOVE_SLOT_COUNT)
- 12 (floats per sprite slot)
- 96 (8 sprites Ã— 12 floats)
- 768 (OFFSET_SCREEN_CHARS)
- 1440 (OFFSET_SCREEN_PATTERNS)
- 2112 (OFFSET_CURSOR)
- 2120 (OFFSET_SCALARS)
- 2128 (OFFSET_ANIMATION_SYNC)
- 2200 (SHARED_DISPLAY_BUFFER_BYTES)
- 24 (SCREEN_HEIGHT)
- 28 (SCREEN_WIDTH)

These should be consolidated into a single constants file:

src/core/animation/bufferLayout.ts (or similar):
```typescript
// Buffer size
export const SHARED_DISPLAY_BUFFER_BYTES = 2200

// Sprite section
export const MAX_SPRITES = 8
export const FLOATS_PER_SPRITE = 12
export const SPRITE_SECTION_FLOATS = MAX_SPRITES * FLOATS_PER_SPRITE

// Screen section
export const SCREEN_WIDTH = 28
export const SCREEN_HEIGHT = 24
export const SCREEN_CHARS = SCREEN_WIDTH * SCREEN_HEIGHT

// Offsets (in Float64 units or bytes as appropriate)
export const OFFSET_SCREEN_CHARS = 768
export const OFFSET_SCREEN_PATTERNS = 1440
// ... etc
```

Then update all files to import from this central location instead of using hardcoded numbers.

Files affected:
- src/core/animation/sharedAnimationBuffer.ts
- src/core/animation/sharedDisplayBuffer.ts
- src/core/animation/sharedDisplayBufferAccessor.ts
- src/features/ide/components/StateInspector.vue (MOVE_SLOT_COUNT)
- test/integration/*.test.ts
