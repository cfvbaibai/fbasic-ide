type: feature
status: open
subject: BG GRAPHIC Editor
description: |
  ## Overview

  Implement a BG GRAPHIC editor to enable users to create/edit background graphics,
  unblocking the VIEW command.

  ## Background

  The VIEW command copies the BG GRAPHIC screen (28×21 tiles) to the background screen.
  Currently, users have no way to populate the BG GRAPHIC buffer, making VIEW unusable.

  ## Scope

  ### 1. BG GRAPHIC Buffer Storage
  - Add `bgGraphicBuffer` (28×21 tiles, 588 bytes) to device layer
  - Integrate with existing screen state management
  - Expose via device adapter interface

  ### 2. UI Editor
  - New editor tab/panel for BG GRAPHIC
  - Grid-based tile editor (28 columns × 21 rows)
  - Character selection (from character set)
  - Color selection (from current palette)
  - Draw, erase, fill tools
  - Clear all function

  ### 3. VIEW Command Integration
  - Add VIEW token and parser rule
  - Create ViewExecutor
  - Implement `copyBgGraphicToBackground()` in device
  - Tests for VIEW command

  ### 4. Optional: Load/Save
  - Export BG GRAPHIC as data
  - Import BG GRAPHIC from data
  - Persist in program storage (DATA statements?)

  ## Technical Notes

  - BG GRAPHIC size: 28×21 = 588 tiles
  - Each tile is a character code (0-255)
  - On real hardware, BG GRAPHIC is edited in CGEN mode
  - Character set already available in `src/core/constants.ts`

  ## Reference

  - `docs/reference/family-basic-manual/page-36.md` — Screen Display Process
  - `docs/reference/family-basic-manual/page-71.md` — CGEN mode

  ## Dependencies

  - Existing character set data
  - Existing palette system
  - Device adapter architecture

  ## Estimated Effort

  Medium-Large (2-4 days)
